<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>minerva: minerva::Timeline Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">minerva
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">GPGPU computing framework using the Vulkan API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classminerva_1_1_timeline.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classminerva_1_1_timeline-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">minerva::Timeline Class Reference<div class="ingroups"><a class="el" href="group__command.html">Command</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class used for controlling time dependency on commands.  
 <a href="classminerva_1_1_timeline.html#details">More...</a></p>

<p><code>#include &lt;Timeline.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0e10d988da135001f02830e398a1ba08"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classminerva_1_1_timeline.html#a0e10d988da135001f02830e398a1ba08">getValue</a> ()</td></tr>
<tr class="memdesc:a0e10d988da135001f02830e398a1ba08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the last finished step.  <a href="classminerva_1_1_timeline.html#a0e10d988da135001f02830e398a1ba08">More...</a><br /></td></tr>
<tr class="separator:a0e10d988da135001f02830e398a1ba08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a207fd0440777b6f4c43c3bb38113b418"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classminerva_1_1_timeline.html#a207fd0440777b6f4c43c3bb38113b418">setValue</a> (uint64_t value)</td></tr>
<tr class="memdesc:a207fd0440777b6f4c43c3bb38113b418"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the last finished step.  <a href="classminerva_1_1_timeline.html#a207fd0440777b6f4c43c3bb38113b418">More...</a><br /></td></tr>
<tr class="separator:a207fd0440777b6f4c43c3bb38113b418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f6051201ca7095d07316c754bf64bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classminerva_1_1_timeline.html#a57f6051201ca7095d07316c754bf64bf">Timeline</a> (const <a class="el" href="group__core.html#gafec85a0ad255bb406eb1d09ef93c68c0">ContextHandle</a> &amp;context, uint64_t initialValue=0)</td></tr>
<tr class="memdesc:a57f6051201ca7095d07316c754bf64bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classminerva_1_1_timeline.html" title="Class used for controlling time dependency on commands.">Timeline</a> object.  <a href="classminerva_1_1_timeline.html#a57f6051201ca7095d07316c754bf64bf">More...</a><br /></td></tr>
<tr class="separator:a57f6051201ca7095d07316c754bf64bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae701630f7480b73ebfd681a90e59320e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classminerva_1_1_timeline.html#ae701630f7480b73ebfd681a90e59320e">waitValue</a> (uint64_t value) const</td></tr>
<tr class="memdesc:ae701630f7480b73ebfd681a90e59320e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for the timeline to reach the given step.  <a href="classminerva_1_1_timeline.html#ae701630f7480b73ebfd681a90e59320e">More...</a><br /></td></tr>
<tr class="separator:ae701630f7480b73ebfd681a90e59320e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99685b7ceeee028d807b9e006ae3ac96"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classminerva_1_1_timeline.html#a99685b7ceeee028d807b9e006ae3ac96">waitValue</a> (uint64_t value, uint64_t timeout) const</td></tr>
<tr class="memdesc:a99685b7ceeee028d807b9e006ae3ac96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for the timeline to reach the given step for a certain time.  <a href="classminerva_1_1_timeline.html#a99685b7ceeee028d807b9e006ae3ac96">More...</a><br /></td></tr>
<tr class="separator:a99685b7ceeee028d807b9e006ae3ac96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class used for controlling time dependency on commands. </p>
<p><a class="el" href="classminerva_1_1_timeline.html" title="Class used for controlling time dependency on commands.">minerva::Timeline</a> holds a strictly increasing value for the last finished step, which can be used to coordinate between GPU-GPU, GPU-CPU and CPU-CPU. Allows to query the progress of a sequence or for the GPU to wait on the CPU.</p>
<div class="fragment"><div class="line"><a class="code" href="classminerva_1_1_timeline.html#a57f6051201ca7095d07316c754bf64bf">Timeline</a> timeline(context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// *** some gpu code ***</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//wait for the gpu</span></div>
<div class="line">timeline.waitValue(5);</div>
<div class="line"><span class="comment">//do some stuff on the cpu</span></div>
<div class="line"><span class="comment">//notify the gpu to carry on</span></div>
<div class="line">timeline.setValue(6);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>(!timeline.waitValue(10,20000))</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Still runnning...\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Done!\n&quot;</span>;</div>
<div class="ttc" id="aclassminerva_1_1_timeline_html_a57f6051201ca7095d07316c754bf64bf"><div class="ttname"><a href="classminerva_1_1_timeline.html#a57f6051201ca7095d07316c754bf64bf">minerva::Timeline::Timeline</a></div><div class="ttdeci">Timeline(const ContextHandle &amp;context, uint64_t initialValue=0)</div><div class="ttdoc">Construct a new Timeline object.</div></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="classminerva_1_1_sequence_builder.html" title="Builder class for creating a command sequence.">minerva::SequenceBuilder</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a57f6051201ca7095d07316c754bf64bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f6051201ca7095d07316c754bf64bf">&#9670;&nbsp;</a></span>Timeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">minerva::Timeline::Timeline </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__core.html#gafec85a0ad255bb406eb1d09ef93c68c0">ContextHandle</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>initialValue</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="classminerva_1_1_timeline.html" title="Class used for controlling time dependency on commands.">Timeline</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>Context in which this will be created. </td></tr>
    <tr><td class="paramname">initialValue</td><td>The step this timeline starts in. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0e10d988da135001f02830e398a1ba08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e10d988da135001f02830e398a1ba08">&#9670;&nbsp;</a></span>getValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t minerva::Timeline::getValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the last finished step. </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t The last finished step. </dd></dl>

</div>
</div>
<a id="a207fd0440777b6f4c43c3bb38113b418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a207fd0440777b6f4c43c3bb38113b418">&#9670;&nbsp;</a></span>setValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void minerva::Timeline::setValue </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the last finished step. </p>
<p>Updates the last finished step as returned by <a class="el" href="classminerva_1_1_timeline.html#a0e10d988da135001f02830e398a1ba08">Timeline::getValue()</a>. Can be used to notify other observer of the timeline such as commands issued on the GPU or other tasks after a step on the CPU side finished.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The last finished step. Must be at least the current value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae701630f7480b73ebfd681a90e59320e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae701630f7480b73ebfd681a90e59320e">&#9670;&nbsp;</a></span>waitValue() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void minerva::Timeline::waitValue </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for the timeline to reach the given step. </p>
<p>Blocks the calling thread until timeline reaches the given step. Returns immediately if the value is at least the given one. Note that if the given value is never reached, a deadlock is created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The step to wait for. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99685b7ceeee028d807b9e006ae3ac96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99685b7ceeee028d807b9e006ae3ac96">&#9670;&nbsp;</a></span>waitValue() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool minerva::Timeline::waitValue </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for the timeline to reach the given step for a certain time. </p>
<p>Blocks the calling thread until timeline reaches the given step or timeout nanoseconds elapsed. Returns true in the former and false in the latter case. Returns immediately true if the value is at least the given one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The step to wait for. </td></tr>
    <tr><td class="paramname">timeout</td><td>Time in nanoseconds to wait for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true <a class="el" href="classminerva_1_1_timeline.html" title="Class used for controlling time dependency on commands.">Timeline</a> reached at least the given step in timeout nanoseconds. </dd>
<dd>
false Timeout ran out. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>minerva/Timeline.hpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>minerva</b></li><li class="navelem"><a class="el" href="classminerva_1_1_timeline.html">Timeline</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
